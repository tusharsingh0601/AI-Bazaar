<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports - AI Bazaar</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Shared Dashboard Layout Styles */
        body { background-color: #F0F4F8; overflow: hidden; height: 100vh; }
        .dashboard-wrapper { display: flex; height: 100vh; width: 100%; }

        .sidebar {
            width: 260px; background: #1B4965; color: white; display: flex; flex-direction: column; flex-shrink: 0; z-index: 10;
        }
        .sidebar-header { padding: 1.5rem 2rem; display: flex; align-items: center; gap: 0.75rem; height: 70px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .sidebar-brand { font-size: 1.4rem; font-weight: 800; }
        .nav-scroll { flex: 1; overflow-y: auto; padding: 1.5rem 1rem; }
        .nav-link { display: flex; align-items: center; gap: 1rem; padding: 0.8rem 1rem; color: rgba(255,255,255,0.75); text-decoration: none; border-radius: 8px; margin-bottom: 0.25rem; font-size: 0.95rem; transition: 0.2s; }
        .nav-link:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-link.active { background: #5FA8D3; color: white; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .nav-icon { width: 20px; text-align: center; }

        .main-content { flex: 1; overflow-y: auto; padding: 2rem; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }

        /* Report Specifics */
        .report-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-bottom: 2rem; }
        .chart-full { grid-column: span 3; }

        /* Card Styles */
        .card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); border: 1px solid #E2E8F0; }
        .heading-card { font-size: 0.875rem; text-transform: uppercase; color: #64748B; letter-spacing: 0.05em; margin-bottom: 1rem; font-weight: 700; }

        @media (max-width: 1024px) {
            .report-grid { grid-template-columns: 1fr; }
            .chart-full { grid-column: span 1; }
        }
    </style>
</head>

<body>
<div class="dashboard-wrapper">
    <aside class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-robot fa-lg"></i>
            <div class="sidebar-brand">AI Bazaar</div>
        </div>
        <nav class="nav-scroll">
            <a href="dashboard.html" class="nav-link">
                <i class="fas fa-chart-pie nav-icon"></i> <span>Overview</span>
            </a>
            <a href="inventory.html" class="nav-link">
                <i class="fas fa-box nav-icon"></i> <span>Inventory</span>
            </a>
            <a href="sales.html" class="nav-link">
                <i class="fas fa-shopping-cart nav-icon"></i> <span>Sales</span>
            </a>
            <a href="reports.html" class="nav-link active">
                <i class="fas fa-file-invoice-dollar nav-icon"></i> <span>Reports</span>
            </a>
            <a href="voice-assistant.html" class="nav-link">
                <i class="fas fa-microphone nav-icon"></i> <span>AI Assistant</span>
            </a>
            <a href="settings.html" class="nav-link">
                <i class="fas fa-cog nav-icon"></i> <span>Settings</span>
            </a>
            <div style="margin-top: 2rem;">
                <button onclick="window.location.href='login.html'" class="btn" style="width: 100%; justify-content: start; color: #FCA5A5; background: rgba(255,255,255,0.05); border: none;">
                    <i class="fas fa-sign-out-alt nav-icon"></i> Logout
                </button>
            </div>
        </nav>
    </aside>

    <main class="main-content">
        <header class="dashboard-header">
            <div>
                <h1 style="font-size: 1.5rem; font-weight: 700; color: #0F172A; margin: 0;">Business Intelligence</h1>
                <p style="color: #64748B; margin: 5px 0 0 0; font-size: 0.9rem;">Deep dive into your store's performance.</p>
            </div>
            <div class="flex-center gap-2" style="gap: 1rem;">
                <div style="position: relative;">
                    <i class="fas fa-calendar-alt" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #64748B;"></i>
                    <input type="date" class="input" style="width: auto; padding-left: 2.5rem;">
                </div>
                <button class="btn btn-primary">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </header>

        <div class="dashboard-content fade-in">
            <div class="report-grid">
                <div class="card chart-full">
                    <div class="flex-between mb-4" style="margin-bottom: 1rem;">
                        <h3 class="heading-card" style="margin: 0;">Revenue Performance (Last 30 Days)</h3>
                        <select style="border: 1px solid #E2E8F0; padding: 4px 8px; border-radius: 6px; font-size: 0.85rem; color: #475569;">
                            <option>Last 30 Days</option>
                            <option>Last Quarter</option>
                            <option>This Year</option>
                        </select>
                    </div>
                    <div style="height: 350px;">
                        <canvas id="revenueTrendChart"></canvas>
                    </div>
                </div>

                <div class="card" style="grid-column: span 2;">
                    <h3 class="heading-card">Top Selling Categories</h3>
                    <div style="height: 300px;">
                        <canvas id="categoryDistribution"></canvas>
                    </div>
                </div>

                <div class="card" style="grid-column: span 1;">
                    <h3 class="heading-card">Monthly Sales Target</h3>
                    <div class="flex-center" style="height: 300px; flex-direction: column; text-align: center;">
                        <div style="position: relative; width: 150px; height: 150px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                            <svg viewBox="0 0 36 36" style="width: 100%; height: 100%; transform: rotate(-90deg);">
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#E2E8F0" stroke-width="3" />
                                <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#10B981" stroke-width="3" stroke-dasharray="82, 100" />
                            </svg>
                            <div style="position: absolute; font-size: 2.5rem; font-weight: 800; color: #0F172A;">82%</div>
                        </div>
                        <p style="color: #64748B; font-size: 0.9rem;">Goal: ₹5,00,000</p>
                        <p style="color: #10B981; font-weight: 600; font-size: 0.9rem;">₹4,10,000 Achieved</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<script src="../assets/js/utils.js"></script>
<script src="../assets/js/auth.js"></script>

<script>
    // auth.requireAuth(); // Commented for demo

    window.onload = function () {
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748B';

        // Trend Chart
        const ctxTrend = document.getElementById('revenueTrendChart').getContext('2d');
        const trendGrad = ctxTrend.createLinearGradient(0, 0, 0, 400);
        trendGrad.addColorStop(0, 'rgba(27, 73, 101, 0.2)');
        trendGrad.addColorStop(1, 'rgba(27, 73, 101, 0)');

        new Chart(ctxTrend, {
            type: 'line',
            data: {
                labels: Array.from({ length: 15 }, (_, i) => `Day ${i + 1}`),
                datasets: [{
                    label: 'Gross Sales',
                    data: [12000, 15000, 11000, 18000, 22000, 20000, 25000, 24000, 28000, 32000, 30000, 35000, 38000, 42000, 45000],
                    borderColor: '#1B4965',
                    borderWidth: 3,
                    backgroundColor: trendGrad,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 4,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: '#1B4965'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: '#f1f5f9', drawBorder: false }, beginAtZero: true },
                    x: { grid: { display: false } }
                }
            }
        });

        // Category Bar Chart
        new Chart(document.getElementById('categoryDistribution'), {
            type: 'bar',
            data: {
                labels: ['Electronics', 'Home', 'Groceries', 'Beauty', 'Fashion', 'Others'],
                datasets: [{
                    label: 'Revenue',
                    data: [120000, 85000, 65000, 45000, 32000, 15000],
                    backgroundColor: ['#1B4965', '#2A6F97', '#468FAF', '#61A5C2', '#89C2D9', '#A9D6E5'],
                    borderRadius: 4,
                    barPercentage: 0.6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: '#f1f5f9', drawBorder: false } },
                    x: { grid: { display: false } }
                }
            }
        });
    };
</script>
</body>
</html>